<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ù…Ø¶Ø§Ù† 2026 - Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/adhan@4.4.3/lib/bundles/adhan.umd.min.js" defer></script>

    <style>
        /* * [ARCHITECTURE] Design Tokens
         * Ù†Ø¸Ø§Ù… ØªØµÙ…ÙŠÙ… Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø³Ù‡ÙˆÙ„Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… ÙˆØ¯Ø¹Ù… Ø§Ù„Ù€ Dark/Light Mode 
         */
        :root {
            /* Color Palette */
            --brand-primary: #099999; /* Ù„ÙˆÙ† Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø®ØµØµ ÙŠØ¹ÙƒØ³ Ø§Ù„Ù‡ÙˆÙŠØ© */
            --accent-gold: #fbbf24;
            --accent-blue: #3b82f6;
            --success-color: #10b981;
            --danger-color: #ef4444;
            
            /* Theme: Dark (Default) */
            --bg-base: #0f172a;
            --bg-surface: rgba(30, 41, 59, 0.7);
            --bg-surface-hover: rgba(30, 41, 59, 0.9);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border-glass: rgba(255, 255, 255, 0.1);
            --shadow-elevation-1: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-elevation-2: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-glow: 0 0 20px rgba(9, 153, 153, 0.3);

            /* Typography & Motion */
            --font-main: 'Tajawal', system-ui, sans-serif;
            --transition-smooth: 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            --transition-bounce: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* [UX] Light Mode Support */
        [data-theme="light"] {
            --bg-base: #f1f5f9;
            --bg-surface: rgba(255, 255, 255, 0.8);
            --bg-surface-hover: rgba(255, 255, 255, 1);
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --border-glass: rgba(0, 0, 0, 0.05);
            --shadow-elevation-1: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            --shadow-elevation-2: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-glow: 0 0 20px rgba(9, 153, 153, 0.15);
        }

        /* [PERFORMANCE] Reset & Box Sizing */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-base);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color var(--transition-smooth), color var(--transition-smooth);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1rem;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* [UI/UX] Visual Depth - Dynamic Ambient Background */
        .ambient-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            background: 
                radial-gradient(circle at 15% 50%, rgba(9, 153, 153, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 85% 30%, rgba(251, 191, 36, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .moon-bg {
            position: fixed;
            top: -50px; left: -50px;
            width: 300px; height: 300px;
            background: radial-gradient(circle, var(--accent-gold) 0%, transparent 70%);
            opacity: 0.08;
            filter: blur(40px);
            animation: floatAmbient 20s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform; /* [PERFORMANCE] Hardware acceleration hint */
            z-index: -1;
        }

        @keyframes floatAmbient {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(30px, 40px) scale(1.1); }
        }

        /* [ARCHITECTURE] Layout System */
        .dashboard-container {
            width: 100%;
            max-width: 1280px;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
            opacity: 0; /* ÙŠØ¨Ø¯Ø£ Ù…Ø®ÙÙŠØ§Ù‹ Ù„Ù„Ù€ Entrance Animation */
            transform: translateY(20px);
        }

        /* Header & Controls */
        .app-header {
            grid-column: span 12;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .greeting-section {
            display: flex;
            flex-direction: column;
        }

        .greeting-title { 
            font-size: clamp(1.8rem, 4vw, 2.5rem); 
            font-weight: 900; 
            letter-spacing: -0.5px;
        }

        .encouraging-text { 
            font-size: 1.1rem; 
            color: var(--text-secondary); 
            font-weight: 500; 
        }

        /* [INTERACTION] Theme & Settings Toggles */
        .controls { display: flex; gap: 10px; }
        
        .icon-btn {
            background: var(--bg-surface);
            border: 1px solid var(--border-glass);
            color: var(--text-primary);
            width: 44px; height: 44px;
            border-radius: 12px;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all var(--transition-smooth);
            backdrop-filter: blur(10px);
        }
        
        .icon-btn:hover, .icon-btn:focus-visible {
            transform: translateY(-2px);
            background: var(--bg-surface-hover);
            box-shadow: var(--shadow-elevation-1);
            outline: none;
            border-color: var(--brand-primary);
        }

        /* [UI/UX] Glassmorphism Cards with Dynamic Hover */
        .card {
            background: var(--bg-surface);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: var(--shadow-elevation-1);
            transition: transform var(--transition-smooth), box-shadow var(--transition-smooth), border-color var(--transition-smooth);
            position: relative;
            overflow: hidden;
            /* [PERFORMANCE] content-visibility Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ù†Ø¯Ø± Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø© */
            content-visibility: auto; 
            contain-intrinsic-size: 200px;
        }

        /* Micro-interaction: Subtle border glow on hover based on mouse position (JS controlled) */
        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: inherit;
            padding: 2px;
            background: radial-gradient(800px circle at var(--mouse-x, 0) var(--mouse-y, 0), rgba(9, 153, 153, 0.4), transparent 40%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
        }
        .card:hover::before { opacity: 1; }
        .card:hover { transform: translateY(-4px); box-shadow: var(--shadow-elevation-2); }

        /* Grid Placements */
        .widget-container { grid-column: span 12; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .main-stat-card { grid-column: span 12; @media(min-width: 992px) { grid-column: span 5; } display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .progress-card { grid-column: span 12; @media(min-width: 992px) { grid-column: span 7; } display: flex; flex-direction: column; justify-content: center; }
        .ramadan-month-card { grid-column: span 12; }
        .work-card { grid-column: span 12; @media(min-width: 992px) { grid-column: span 6; } }
        .prayers-list-card { grid-column: span 12; @media(min-width: 992px) { grid-column: span 6; } }
        .exercises-card { grid-column: span 12; }

        /* Typography inside cards */
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.2rem; width: 100%; }
        .card-title { font-size: 1.25rem; font-weight: 700; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
        .big-number { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 900; line-height: 1.1; font-variant-numeric: tabular-nums; }
        .gold-text { color: var(--accent-gold); text-shadow: 0 0 15px rgba(251, 191, 36, 0.2); }
        .brand-text { color: var(--brand-primary); text-shadow: 0 0 15px rgba(9, 153, 153, 0.3); }

        /* [UI/UX] Smart Progress Bars */
        .progress-wrapper { margin-top: 1rem; width: 100%; }
        .progress-header { display: flex; justify-content: space-between; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.95rem; }
        .progress-value { font-family: ui-monospace, monospace; font-weight: 700; }
        .progress-track { width: 100%; height: 14px; background: rgba(0,0,0,0.1); border-radius: 999px; overflow: hidden; border: 1px inset var(--border-glass); }
        [data-theme="light"] .progress-track { background: rgba(0,0,0,0.05); }
        
        .progress-fill { 
            height: 100%; 
            border-radius: 999px; 
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1); 
            position: relative;
        }
        /* Animated gradient background for active state */
        .fill-fasting { background: linear-gradient(90deg, var(--brand-primary), var(--accent-gold)); background-size: 200% 200%; animation: gradientMove 3s ease infinite; }
        .fill-work { background: linear-gradient(90deg, #059669, #34d399); }
        .fill-month { background: linear-gradient(90deg, #6366f1, #a855f7); }

        @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* [UI/UX] Interactive Prayer List */
        .prayer-item {
            display: flex; justify-content: space-between; padding: 1rem;
            border-bottom: 1px solid var(--border-glass);
            border-radius: 12px; transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .prayer-item:last-child { border-bottom: none; }
        .prayer-item:hover { background: rgba(255,255,255,0.03); transform: translateX(-5px); }
        
        .prayer-item.active {
            background: rgba(9, 153, 153, 0.1);
            border-color: transparent;
            box-shadow: inset -4px 0 0 var(--brand-primary);
        }
        /* Interactive State Indicator: Pulse dot for active prayer */
        .prayer-item.active::before {
            content: ''; position: absolute; right: 15px; top: 50%; transform: translateY(-50%);
            width: 8px; height: 8px; background: var(--brand-primary); border-radius: 50%;
            box-shadow: 0 0 0 0 rgba(9, 153, 153, 0.7); animation: pulseDot 2s infinite;
        }
        @keyframes pulseDot { 0% { box-shadow: 0 0 0 0 rgba(9, 153, 153, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(9, 153, 153, 0); } 100% { box-shadow: 0 0 0 0 rgba(9, 153, 153, 0); } }
        
        .prayer-name { font-weight: 700; padding-right: 20px; }
        .prayer-time { font-family: ui-monospace, monospace; font-weight: 600; }

        /* Exercises Grid */
        .exercises-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .exercise-item {
            background: rgba(0,0,0,0.1); padding: 1.2rem; border-radius: 16px;
            border-right: 4px solid var(--text-secondary);
            transition: all var(--transition-smooth);
        }
        [data-theme="light"] .exercise-item { background: rgba(0,0,0,0.02); }
        .exercise-item:hover { transform: translateY(-3px); border-right-color: var(--brand-primary); background: var(--bg-surface-hover); }
        .exercise-title { font-weight: 700; color: var(--brand-primary); margin-bottom: 0.5rem; font-size: 1.1rem; }
        .exercise-desc { font-size: 0.95rem; color: var(--text-secondary); }

        /* [UI/UX] Modern Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000; opacity: 0; visibility: hidden;
            transition: all var(--transition-smooth);
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        
        .modal-content {
            background: var(--bg-base); width: 90%; max-width: 450px;
            padding: 2.5rem; border-radius: 24px; border: 1px solid var(--border-glass);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transform: scale(0.95) translateY(20px); transition: all var(--transition-bounce);
        }
        .modal-overlay.active .modal-content { transform: scale(1) translateY(0); }
        
        .form-group { margin-bottom: 1.5rem; text-align: right; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.95rem; color: var(--text-secondary); }
        .form-control {
            width: 100%; padding: 0.8rem 1rem; border-radius: 12px;
            background: var(--bg-surface); border: 2px solid var(--border-glass);
            color: var(--text-primary); font-family: var(--font-main); font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-control:focus { outline: none; border-color: var(--brand-primary); box-shadow: 0 0 0 4px rgba(9, 153, 153, 0.1); }
        
        .btn-primary {
            width: 100%; padding: 1rem; border-radius: 12px; border: none;
            background: var(--brand-primary); color: #fff; font-family: var(--font-main);
            font-size: 1.1rem; font-weight: 700; cursor: pointer;
            transition: all var(--transition-bounce);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-glow); filter: brightness(1.1); }

        /* [UX] Smart Toast Notifications (Ø¨Ø¯ÙŠÙ„ Ø§Ù„Ù€ Alert) */
        .toast-container { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
        .toast {
            background: var(--bg-surface-hover); color: var(--text-primary); padding: 12px 24px;
            border-radius: 99px; box-shadow: var(--shadow-elevation-2); border: 1px solid var(--border-glass);
            font-weight: 500; font-size: 0.95rem;
            animation: slideUpFade 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* [UX] Skeleton Loading States */
        .skeleton { background: linear-gradient(90deg, var(--bg-surface) 25%, var(--border-glass) 50%, var(--bg-surface) 75%); background-size: 400% 100%; animation: skeleton-loading 1.5s infinite; border-radius: 8px; color: transparent !important; user-select: none; }
        @keyframes skeleton-loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        /* [A11Y] Reduced Motion Preference */
        @media (prefers-reduced-motion: reduce) {
            *, ::before, ::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
        }
    </style>
</head>
<body>

    <div class="ambient-bg" aria-hidden="true"></div>
    <div class="moon-bg" aria-hidden="true"></div>

    <div id="toast-container" class="toast-container" role="status" aria-live="polite"></div>

    <div id="settings-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <div class="card-header" style="justify-content: center; margin-bottom: 2rem;">
                <h2 id="modal-title" class="card-title brand-text" style="font-size: 1.5rem;">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø©</h2>
            </div>
            <form id="settings-form" novalidate>
                <div class="form-group">
                    <label for="user-name-input">Ø§Ù„Ø§Ø³Ù… / Ø§Ù„Ù„Ù‚Ø¨</label>
                    <input type="text" id="user-name-input" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="start-time-input">ÙˆÙ‚Øª Ø¨Ø¯Ø¡ Ø§Ù„Ø¯ÙˆØ§Ù… (Ù†Ø¸Ø§Ù… 24 Ø³Ø§Ø¹Ø©)</label>
                    <input type="time" id="start-time-input" class="form-control" value="07:30" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="end-time-input">ÙˆÙ‚Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù…</label>
                    <input type="time" id="end-time-input" class="form-control" value="14:30" required aria-required="true">
                </div>
                <button type="submit" class="btn-primary">Ø­ÙØ¸ ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªØ¬Ø±Ø¨Ø©</button>
            </form>
        </div>
    </div>

    <main class="dashboard-container" id="main-dashboard">
        
        <header class="app-header">
            <div class="greeting-section">
                <h1 class="greeting-title">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ<span id="display-name" class="brand-text"></span> âœ¨</h1>
                <p id="encouraging-message" class="encouraging-text skeleton">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
            </div>
            <div class="controls">
                <button id="theme-toggle" class="icon-btn" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±">ğŸŒ™</button>
                <button id="settings-trigger" class="icon-btn" aria-label="ÙØªØ­ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">âš™ï¸</button>
            </div>
        </header>

        <section class="widget-container" aria-label="Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹">
            <div class="card hover-3d">
                <div class="card-title" style="font-size:0.9rem; justify-content:center;">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ</div>
                <div id="hijri-date" class="big-number gold-text skeleton" style="font-size:1.8rem; margin-top:10px;">ØªØ­Ù…ÙŠÙ„...</div>
            </div>
            <div class="card hover-3d">
                <div class="card-title" style="font-size:0.9rem; justify-content:center;">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</div>
                <div id="gregorian-date" class="big-number skeleton" style="font-size:1.5rem; margin-top:10px;">ØªØ­Ù…ÙŠÙ„...</div>
            </div>
            <div class="card hover-3d">
                <div class="card-title" style="font-size:0.9rem; justify-content:center;">Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø¹ÙŠØ¯</div>
                <div id="days-left" class="big-number brand-text skeleton" style="font-size:1.8rem; margin-top:10px;">-</div>
            </div>
        </section>

        <article class="card main-stat-card hover-3d" aria-labelledby="next-prayer-title">
            <h2 id="next-prayer-title" class="card-title">Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: <span id="next-prayer-name" class="brand-text skeleton" style="margin-right: 8px;">-</span></h2>
            <div id="countdown" class="big-number gold-text skeleton" aria-live="timer">00:00:00</div>
            <p class="encouraging-text" style="margin-top: 5px;">Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø£Ø°Ø§Ù†</p>
        </article>

        <article class="card progress-card hover-3d">
            <h2 class="card-title">â³ Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠØ§Ù… Ø§Ù„ÙŠÙˆÙ…</h2>
            <div class="progress-wrapper">
                <div class="progress-header">
                    <span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</span>
                    <span id="fasting-percentage" class="progress-value brand-text skeleton">0.00%</span>
                </div>
                <div class="progress-track">
                    <div id="fasting-bar" class="progress-fill fill-fasting" style="width: 0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </article>

        <article class="card ramadan-month-card hover-3d">
            <div class="card-header">
                <h2 class="card-title">ğŸŒ™ Ø¥Ù†Ø¬Ø§Ø² Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù†</h2>
                <span id="ramadan-days-text" class="text-secondary skeleton">Ø§Ù„ÙŠÙˆÙ… - Ù…Ù† 30</span>
            </div>
            <div class="progress-wrapper" style="margin-top:0;">
                <div class="progress-header">
                    <span>Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒÙ„ÙŠ</span>
                    <span id="ramadan-month-percentage" class="progress-value brand-text skeleton">0.00%</span>
                </div>
                <div class="progress-track">
                    <div id="ramadan-month-bar" class="progress-fill fill-month" style="width: 0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </article>

        <article class="card work-card hover-3d">
            <h2 class="card-title">ğŸ“Š ØªØªØ¨Ø¹ Ø§Ù„Ø¯ÙˆØ§Ù… <span style="font-size:0.8rem; font-weight:normal; margin-right:auto; color:var(--text-secondary);" id="work-hours-display"></span></h2>
            <div style="text-align: center; margin: 1.5rem 0;">
                <div id="work-countdown" class="big-number skeleton" style="font-size: 3rem; color: var(--success-color);">00:00:00</div>
                <p id="work-status-label" class="encouraging-text skeleton" style="margin-top: 5px;">Ø§Ù„Ø­Ø§Ù„Ø©</p>
            </div>
            <div class="progress-wrapper">
                <div class="progress-header">
                    <span>Ù†Ø³Ø¨Ø© Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¹Ù…Ù„</span>
                    <span id="work-percentage" class="progress-value skeleton" style="color: var(--success-color);">0.00%</span>
                </div>
                <div class="progress-track">
                    <div id="work-bar" class="progress-fill fill-work" style="width: 0%;" role="progressbar"></div>
                </div>
            </div>
        </article>

        <article class="card prayers-list-card hover-3d">
            <h2 class="card-title">ğŸ•Œ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ÙŠÙˆÙ…</h2>
            <div id="prayers-list" style="margin-top: 1rem; display: flex; flex-direction: column; gap: 8px;">
                <div class="prayer-item skeleton" style="height: 50px;"></div>
                <div class="prayer-item skeleton" style="height: 50px;"></div>
                <div class="prayer-item skeleton" style="height: 50px;"></div>
            </div>
        </article>

        <article class="card exercises-card hover-3d">
            <h2 class="card-title">âš¡ ØªÙ…Ø±ÙŠÙ†Ø§Øª Ù…ÙƒØªØ¨ÙŠØ© Ø³Ø±ÙŠØ¹Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© ÙˆØ§Ù„ÙŠÙ‚Ø¸Ø©</h2>
            <div class="exercises-grid">
                <div class="exercise-item">
                    <div class="exercise-title">1. ØªÙ…Ø¯ÙŠØ¯ Ø§Ù„Ø±Ù‚Ø¨Ø© ÙˆØ§Ù„Ø£ÙƒØªØ§Ù</div>
                    <div class="exercise-desc">Ù„Ù Ø±Ø£Ø³Ùƒ Ø¨Ø¨Ø·Ø¡ØŒ ÙˆØ§Ø±ÙØ¹ Ø£ÙƒØªØ§ÙÙƒ Ù„Ù€ 3 Ø«ÙˆØ§Ù†Ù Ø«Ù… Ø£Ø±Ø®Ù‡Ø§. ÙƒØ±Ø±Ù‡Ø§ Ù„ÙÙƒ Ø§Ù„Ø´Ø¯ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù† Ø§Ù„Ù†Ø¹Ø§Ø³.</div>
                </div>
                <div class="exercise-item">
                    <div class="exercise-title">2. Ø§Ù„ØªÙˆØ§Ø¡ Ø§Ù„Ø¬Ø°Ø¹</div>
                    <div class="exercise-desc">ÙˆØ£Ù†Øª Ø¬Ø§Ù„Ø³ØŒ Ù„Ù Ø¬Ø°Ø¹Ùƒ Ù„Ù„ÙŠÙ…ÙŠÙ† ÙˆØ§Ù…Ø³Ùƒ Ù…Ø³Ù†Ø¯ Ø§Ù„ÙƒØ±Ø³ÙŠ Ù„Ø«ÙˆØ§Ù†ÙØŒ Ø«Ù… Ù„Ù„ÙŠØ³Ø§Ø±. ÙŠÙ†Ø´Ø· Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø¯Ù…ÙˆÙŠØ©.</div>
                </div>
                <div class="exercise-item">
                    <div class="exercise-title">3. ØªÙ…Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø§Ù‚ÙŠÙ†</div>
                    <div class="exercise-desc">Ø§Ø±ÙØ¹ Ø±Ø¬Ù„ÙŠÙƒ Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚ÙŠÙ…ØŒ Ø­Ø±Ùƒ Ù…ÙØµÙ„ Ø§Ù„Ù‚Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ø±ÙŠ 10 Ù…Ø±Ø§Øª Ù„Ø¶Ø® Ø§Ù„Ø¯Ù….</div>
                </div>
                <div class="exercise-item">
                    <div class="exercise-title">4. ØªÙ†ÙØ³ (4-7-8)</div>
                    <div class="exercise-desc">Ø´Ù‡ÙŠÙ‚ 4Ø«ØŒ Ø§Ø­Ø¨Ø³ Ø§Ù„Ù†ÙØ³ 7Ø«ØŒ Ø²ÙÙŠØ± Ø¨Ø·ÙŠØ¡ 8Ø«. ÙŠØ¶Ø® Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ† Ù„Ù„Ø¯Ù…Ø§Øº Ù„Ù„ØªØ±ÙƒÙŠØ² ÙÙˆØ±Ø§Ù‹.</div>
                </div>
            </div>
        </article>
    </main>

    <script>
        /**
         * [ARCHITECTURE] Revealing Module Pattern
         * ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ ÙˆØ­Ø¯Ø§Øª Ù…Ù†Ø·Ù‚ÙŠØ© Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙ„ÙˆØ« ÙÙŠ Ø§Ù„Ù€ Global Scope
         * ÙˆÙØµÙ„ Ø§Ù„Ù€ Logic Ø¹Ù† Ø§Ù„Ù€ UI.
         */
        const DashboardApp = (() => {
            // --- State Management ---
            const state = {
                user: { name: '', startWork: '07:30', endWork: '14:30' },
                theme: 'dark',
                coords: null,
                calcParams: null,
                nextPrayerTime: null,
                isDataLoaded: false
            };

            // --- DOM Elements Caching ---
            const DOM = {
                app: document.getElementById('main-dashboard'),
                modal: document.getElementById('settings-modal'),
                form: document.getElementById('settings-form'),
                toastContainer: document.getElementById('toast-container'),
                themeToggle: document.getElementById('theme-toggle'),
                settingsTrigger: document.getElementById('settings-trigger'),
                
                // Dynamic Data Elements
                elements: {
                    displayName: document.getElementById('display-name'),
                    msg: document.getElementById('encouraging-message'),
                    hijri: document.getElementById('hijri-date'),
                    gregorian: document.getElementById('gregorian-date'),
                    daysLeft: document.getElementById('days-left'),
                    nextPrayerName: document.getElementById('next-prayer-name'),
                    countdown: document.getElementById('countdown'),
                    fastingPercent: document.getElementById('fasting-percentage'),
                    fastingBar: document.getElementById('fasting-bar'),
                    ramadanDays: document.getElementById('ramadan-days-text'),
                    ramadanMonthPercent: document.getElementById('ramadan-month-percentage'),
                    ramadanMonthBar: document.getElementById('ramadan-month-bar'),
                    workHours: document.getElementById('work-hours-display'),
                    workCountdown: document.getElementById('work-countdown'),
                    workStatus: document.getElementById('work-status-label'),
                    workPercent: document.getElementById('work-percentage'),
                    workBar: document.getElementById('work-bar'),
                    prayersList: document.getElementById('prayers-list')
                },
                
                // Inputs
                inputs: {
                    name: document.getElementById('user-name-input'),
                    start: document.getElementById('start-time-input'),
                    end: document.getElementById('end-time-input')
                }
            };

            // --- Utility Functions ---
            const Utils = {
                showToast: (message, type = 'info') => {
                    const toast = document.createElement('div');
                    toast.className = 'toast';
                    toast.textContent = message;
                    if(type === 'error') toast.style.borderLeft = '4px solid var(--danger-color)';
                    if(type === 'success') toast.style.borderLeft = '4px solid var(--success-color)';
                    
                    DOM.toastContainer.appendChild(toast);
                    setTimeout(() => {
                        toast.style.animation = 'slideUpFade 0.4s reverse forwards';
                        setTimeout(() => toast.remove(), 400);
                    }, 3000);
                },
                
                formatTimeDiff: (diffMs) => {
                    if (diffMs <= 0) return "00:00:00";
                    const h = Math.floor(diffMs / 3600000).toString().padStart(2, '0');
                    const m = Math.floor((diffMs % 3600000) / 60000).toString().padStart(2, '0');
                    const s = Math.floor((diffMs % 60000) / 1000).toString().padStart(2, '0');
                    return `${h}:${m}:${s}`;
                },

                escapeHTML: (str) => {
                    // [SECURITY] XSS Prevention
                    const div = document.createElement('div');
                    div.textContent = str;
                    return div.innerHTML;
                },

                removeSkeletons: () => {
                    document.querySelectorAll('.skeleton').forEach(el => el.classList.remove('skeleton'));
                    state.isDataLoaded = true;
                }
            };

            // --- Core Logic ---
            const Logic = {
                initAdhan: () => {
                    if (typeof adhan === 'undefined') {
                        Utils.showToast('ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„', 'error');
                        return false;
                    }
                    // Ø¹Ù…Ø§Ù† - [HARDCODED CONFIG BASED ON ORIGINAL]
                    state.coords = new adhan.Coordinates(31.9539, 35.9106); 
                    state.calcParams = adhan.CalculationMethod.MuslimWorldLeague();
                    state.calcParams.fajrAngle = 18;
                    state.calcParams.ishaAngle = 18;
                    state.calcParams.madhab = adhan.Madhab.Shafi;
                    return true;
                },

                updateStaticData: () => {
                    const now = new Date();
                    
                    // Hijri Calculation (Robust fallback)
                    try {
                        const hijriCalc = new Date(now.getTime() - 86400000);
                        const formatter = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { day: 'numeric', month: 'long', year: 'numeric' });
                        DOM.elements.hijri.textContent = formatter.format(hijriCalc).replace('Ù‡Ù€', '').trim();
                    } catch (e) { DOM.elements.hijri.textContent = "Ø±Ù…Ø¶Ø§Ù† 1447"; }

                    // Gregorian
                    try {
                        const gregFormatter = new Intl.DateTimeFormat('ar-JO', { weekday: 'long', day: 'numeric', month: 'short' });
                        DOM.elements.gregorian.textContent = gregFormatter.format(now);
                    } catch (e) { DOM.elements.gregorian.textContent = now.toLocaleDateString('ar-JO'); }

                    // Eid Countdown
                    const endRamadan = new Date('2026-03-21T00:00:00');
                    const diffDays = Math.ceil((endRamadan - now) / 86400000);
                    DOM.elements.daysLeft.textContent = diffDays > 0 ? `${diffDays} ÙŠÙˆÙ…` : 'Ø¹ÙŠØ¯ Ø³Ø¹ÙŠØ¯!';

                    // Ramadan Month Progress
                    const ramadanStart = new Date('2026-02-19T00:00:00'); 
                    let rDay = Math.floor((now - ramadanStart) / 86400000) + 1;
                    rDay = Math.max(1, Math.min(rDay, 30));
                    const mPercent = (rDay / 30) * 100;
                    
                    DOM.elements.ramadanDays.textContent = `Ø§Ù„ÙŠÙˆÙ… ${rDay} Ù…Ù† 30`;
                    DOM.elements.ramadanMonthPercent.textContent = mPercent.toFixed(1) + '%';
                    DOM.elements.ramadanMonthBar.style.width = mPercent + '%';
                    DOM.elements.ramadanMonthBar.setAttribute('aria-valuenow', mPercent);
                },

                renderPrayers: (prayerTimes) => {
                    DOM.elements.prayersList.innerHTML = '';
                    const schedule = [
                        { id: 'fajr', name: 'Ø§Ù„ÙØ¬Ø±', time: prayerTimes.fajr },
                        { id: 'sunrise', name: 'Ø§Ù„Ø´Ø±ÙˆÙ‚', time: prayerTimes.sunrise },
                        { id: 'dhuhr', name: 'Ø§Ù„Ø¸Ù‡Ø±', time: prayerTimes.dhuhr },
                        { id: 'asr', name: 'Ø§Ù„Ø¹ØµØ±', time: prayerTimes.asr },
                        { id: 'maghrib', name: 'Ø§Ù„Ù…ØºØ±Ø¨', time: prayerTimes.maghrib },
                        { id: 'isha', name: 'Ø§Ù„Ø¹Ø´Ø§Ø¡', time: prayerTimes.isha },
                    ];

                    const now = new Date();
                    let nextFound = false;

                    schedule.forEach(p => {
                        const div = document.createElement('div');
                        div.className = 'prayer-item';
                        const timeStr = p.time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                        
                        // Highlight next prayer (skip sunrise for active target)
                        if (!nextFound && p.time > now && p.id !== 'sunrise') {
                            div.classList.add('active');
                            nextFound = true;
                            DOM.elements.nextPrayerName.textContent = p.name;
                            state.nextPrayerTime = p.time;
                        }
                        
                        div.innerHTML = `<span class="prayer-name">${p.name}</span><span class="prayer-time">${timeStr}</span>`;
                        DOM.elements.prayersList.appendChild(div);
                    });

                    // Handle cross-day (after Isha)
                    if (!nextFound) {
                        const tomorrow = new Date(now.getTime() + 86400000);
                        const nextTimes = new adhan.PrayerTimes(state.coords, tomorrow, state.calcParams);
                        DOM.elements.nextPrayerName.textContent = 'ÙØ¬Ø± Ø§Ù„ØºØ¯';
                        state.nextPrayerTime = nextTimes.fajr;
                    }
                },

                tick: () => {
                    if (!state.isDataLoaded) return;
                    const now = new Date();
                    const pt = new adhan.PrayerTimes(state.coords, now, state.calcParams);

                    // 1. Next Prayer Countdown
                    if (state.nextPrayerTime) {
                        const diff = state.nextPrayerTime - now;
                        if (diff > 0) {
                            DOM.elements.countdown.textContent = Utils.formatTimeDiff(diff);
                        } else {
                            // Re-render prayers when time hits
                            Logic.renderPrayers(pt);
                            // Analytics Hook Trigger
                            document.dispatchEvent(new CustomEvent('app:prayerTimeHit', { detail: { time: now } }));
                        }
                    }

                    // 2. Fasting Progress & Encouragement
                    const f = pt.fajr, m = pt.maghrib;
                    if (now < f) {
                        DOM.elements.msg.textContent = "Ù„Ø§ ØªÙ†Ø³Ù Ù†ÙŠØ© Ø§Ù„ØµÙŠØ§Ù… ÙˆØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø³Ø­ÙˆØ±ØŒ ÙŠØ¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠ ÙŠÙˆÙ…Ùƒ ğŸŒ™";
                        DOM.elements.fastingPercent.textContent = '0.00%';
                        DOM.elements.fastingBar.style.width = '0%';
                    } else if (now >= f && now <= m) {
                        const total = m - f, elapsed = now - f;
                        const p = (elapsed / total);
                        
                        DOM.elements.fastingPercent.textContent = (p * 100).toFixed(4) + '%';
                        DOM.elements.fastingBar.style.width = (p * 100) + '%';
                        
                        if (p < 0.3) DOM.elements.msg.textContent = "Ø¨Ø¯Ø§ÙŠØ© ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø¬Ø±ØŒ ØªÙˆÙƒÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡ ğŸ’ª";
                        else if (p < 0.7) DOM.elements.msg.textContent = "Ø§Ù†ØªØµÙØª Ø±Ø­Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ØŒ Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±Ø¬ â³";
                        else if (p < 0.95) DOM.elements.msg.textContent = "Ø§Ù‚ØªØ±Ø¨ Ø§Ù„Ù…ÙˆØ¹Ø¯.. Ø¬Ù‡Ù‘Ø² Ø¯Ø¹ÙˆØ§ØªÙƒ Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ±Ø¯ ğŸ¤²";
                        else DOM.elements.msg.textContent = "Ù„Ø­Ø¸Ø§Øª ØªÙØµÙ„Ù†Ø§ Ø¹Ù† Ø£Ø¬Ø± Ø¹Ø¸ÙŠÙ…ØŒ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ ØµÙŠØ§Ù…Ùƒ âœ¨";
                    } else {
                        DOM.elements.msg.textContent = "ØµÙˆÙ…Ø§Ù‹ Ù…Ù‚Ø¨ÙˆÙ„Ø§Ù‹ ÙˆØ¥ÙØ·Ø§Ø±Ø§Ù‹ Ø´Ù‡ÙŠØ§Ù‹ØŒ Ù„Ø§ ØªÙ†Ø³Ù†Ø§ Ù…Ù† Ø¯Ø¹Ø§Ø¦Ùƒ ğŸ½ï¸";
                        DOM.elements.fastingPercent.textContent = '100.00%';
                        DOM.elements.fastingBar.style.width = '100%';
                    }

                    // 3. Work Tracker
                    const day = now.getDay();
                    if (day === 5 || day === 6) { // Fri/Sat
                        DOM.elements.workCountdown.textContent = "Ø¥Ø¬Ø§Ø²Ø©";
                        DOM.elements.workStatus.textContent = "Ø¹Ø·Ù„Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ - ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹Ø§ØªÙƒÙ…";
                        DOM.elements.workPercent.textContent = "0.00%";
                        DOM.elements.workBar.style.width = "0%";
                    } else {
                        const [sH, sM] = state.user.startWork.split(':');
                        const [eH, eM] = state.user.endWork.split(':');
                        
                        const wStart = new Date(now).setHours(sH, sM, 0, 0);
                        const wEnd = new Date(now).setHours(eH, eM, 0, 0);

                        if (now < wStart) {
                            DOM.elements.workCountdown.textContent = Utils.formatTimeDiff(wStart - now);
                            DOM.elements.workStatus.textContent = "Ù…ØªØ¨Ù‚ÙŠ Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù…";
                            DOM.elements.workPercent.textContent = '0.00%';
                            DOM.elements.workBar.style.width = '0%';
                        } else if (now >= wStart && now <= wEnd) {
                            const p = ((now - wStart) / (wEnd - wStart)) * 100;
                            DOM.elements.workCountdown.textContent = Utils.formatTimeDiff(wEnd - now);
                            DOM.elements.workStatus.textContent = "Ù…ØªØ¨Ù‚ÙŠ Ù„Ù†Ù‡Ø§ÙŠØ© Ø¯ÙˆØ§Ù…Ùƒ";
                            DOM.elements.workPercent.textContent = p.toFixed(4) + '%';
                            DOM.elements.workBar.style.width = p + '%';
                        } else {
                            DOM.elements.workCountdown.textContent = "00:00:00";
                            DOM.elements.workStatus.textContent = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¯ÙˆØ§Ù…! ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø¹Ø§ÙÙŠØ©";
                            DOM.elements.workPercent.textContent = '100.00%';
                            DOM.elements.workBar.style.width = '100%';
                        }
                    }

                    // Request Next Frame for smooth performance instead of setInterval
                    requestAnimationFrame(Logic.tick);
                }
            };

            // --- UI/Interaction Logic ---
            const UI = {
                initTheme: () => {
                    // Check local storage or system preference
                    const saved = localStorage.getItem('ramadan_theme');
                    const sysPrefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
                    state.theme = saved ? saved : (sysPrefersLight ? 'light' : 'dark');
                    UI.applyTheme();
                    
                    DOM.themeToggle.addEventListener('click', () => {
                        state.theme = state.theme === 'dark' ? 'light' : 'dark';
                        localStorage.setItem('ramadan_theme', state.theme);
                        UI.applyTheme();
                    });
                },

                applyTheme: () => {
                    document.documentElement.setAttribute('data-theme', state.theme);
                    DOM.themeToggle.textContent = state.theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
                    DOM.themeToggle.setAttribute('aria-label', state.theme === 'dark' ? 'ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­' : 'ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†');
                },

                initInteractions: () => {
                    // [UX] Staggered Entrance Animation
                    setTimeout(() => {
                        DOM.app.style.transition = 'opacity 0.8s ease, transform 0.8s cubic-bezier(0.16, 1, 0.3, 1)';
                        DOM.app.style.opacity = '1';
                        DOM.app.style.transform = 'translateY(0)';
                    }, 100);

                    // [UI] Dynamic Hover Physics for Cards (3D Tilt Effect Simulation)
                    document.querySelectorAll('.hover-3d').forEach(card => {
                        card.addEventListener('mousemove', e => {
                            const rect = card.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            card.style.setProperty('--mouse-x', `${x}px`);
                            card.style.setProperty('--mouse-y', `${y}px`);
                        });
                    });
                },

                handleSettings: () => {
                    const saved = localStorage.getItem('ramadan_user');
                    if (saved) {
                        try {
                            state.user = JSON.parse(saved);
                            UI.applyUserData();
                            UI.startAppFlow();
                        } catch(e) { UI.openModal(); }
                    } else {
                        UI.openModal();
                    }

                    DOM.settingsTrigger.addEventListener('click', UI.openModal);
                    
                    DOM.form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const name = Utils.escapeHTML(DOM.inputs.name.value.trim());
                        if(!name) {
                            Utils.showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…', 'error');
                            DOM.inputs.name.focus();
                            return;
                        }
                        
                        state.user = {
                            name: name,
                            startWork: DOM.inputs.start.value,
                            endWork: DOM.inputs.end.value
                        };
                        
                        localStorage.setItem('ramadan_user', JSON.stringify(state.user));
                        UI.applyUserData();
                        UI.closeModal();
                        Utils.showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                        
                        if(!state.isDataLoaded) UI.startAppFlow();
                    });
                },

                applyUserData: () => {
                    DOM.elements.displayName.textContent = `ØŒ ${state.user.name}`;
                    DOM.elements.workHours.textContent = `(${state.user.startWork} - ${state.user.endWork})`;
                    DOM.inputs.name.value = state.user.name;
                    DOM.inputs.start.value = state.user.startWork;
                    DOM.inputs.end.value = state.user.endWork;
                },

                openModal: () => {
                    DOM.modal.classList.add('active');
                    DOM.modal.setAttribute('aria-hidden', 'false');
                    setTimeout(() => DOM.inputs.name.focus(), 300); // Focus for A11y
                },

                closeModal: () => {
                    DOM.modal.classList.remove('active');
                    DOM.modal.setAttribute('aria-hidden', 'true');
                },

                startAppFlow: () => {
                    // Check if adhan loaded
                    let attempts = 0;
                    const checkAdhan = setInterval(() => {
                        if (Logic.initAdhan()) {
                            clearInterval(checkAdhan);
                            Logic.updateStaticData();
                            const pt = new adhan.PrayerTimes(state.coords, new Date(), state.calcParams);
                            Logic.renderPrayers(pt);
                            Utils.removeSkeletons();
                            requestAnimationFrame(Logic.tick); // Start High Performance loop
                        } else {
                            attempts++;
                            if(attempts > 5) {
                                clearInterval(checkAdhan);
                                DOM.elements.msg.textContent = "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
                            }
                        }
                    }, 500);
                }
            };

            // --- Public API ---
            return {
                init: () => {
                    UI.initTheme();
                    UI.initInteractions();
                    UI.handleSettings();
                    // Analytics Hooks Base
                    document.addEventListener('app:prayerTimeHit', (e) => console.log('Analytics Event: Prayer Time Reached', e.detail));
                }
            };
        })();

        // Boot the App
        document.addEventListener('DOMContentLoaded', DashboardApp.init);
    </script>
</body>
</html>
